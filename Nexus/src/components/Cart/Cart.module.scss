@use "sass:color";
@use "../../styles/variables" as vars;
@use "../../styles/mixins" as mixins;

.cart {
  position: fixed;
  right: clamp(12px, 3vw, 28px);
  bottom: clamp(12px, 3vw, 28px);
  width: clamp(280px, 28vw, 360px);
  max-height: 82vh;
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
  z-index: 10;
  background: vars.$surface;
  border-radius: vars.$radius-lg;
  box-shadow: vars.$shadow-card;
  padding: 1.5rem;
  @include mixins.interactive(box-shadow, transform);

  h3 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 700;
    color: vars.$primary;
    letter-spacing: 0.5px;
  }

  @include mixins.respond(mobile) {
    position: static;
    width: 100%;
    max-width: none;
    padding: 1rem;
    border-radius: vars.$radius;
  }

  &.page {
    position: static;
    inset: unset;
    width: min(720px, 100%);
    max-height: none;
    margin: 0 auto;
    box-shadow: 0 30px 60px rgba(15, 23, 42, 0.12);
    border: 1px solid vars.$border;

    h3 {
      font-size: 1.35rem;
    }
  }
}

.items {
  overflow-y: auto;
  max-height: 55vh;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  @include mixins.scrollbar(6px);

  .page & {
    max-height: none;
  }
}

.item {
  display: flex;
  gap: 1rem;
  padding: 1rem;
  border-radius: vars.$radius;
  background: vars.$bg;
  border: 1px solid vars.$border;
  box-shadow: vars.$shadow-soft;
  @include mixins.interactive(box-shadow, transform);

  &:hover {
    transform: translateY(-3px);
    box-shadow: 0 14px 30px rgba(15, 23, 42, 0.12);
  }

  img {
    width: 70px;
    height: 70px;
    object-fit: contain;
    padding: 0.4rem;
    border-radius: vars.$radius-sm;
    border: 1px solid vars.$border;
    background: vars.$surface;
  }
}

.meta {
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 0.35rem;

  > div:first-child {
    font-size: 0.95rem;
    font-weight: 600;
    color: vars.$text-primary;
  }

  > div:nth-child(2) {
    font-weight: 700;
    color: vars.$primary;
  }
}

.controls {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-top: 0.5rem;
  flex-wrap: wrap;

  button {
    @include mixins.button-reset;
    padding: 0.4rem 0.85rem;
    border-radius: vars.$radius-sm;
    border: 1px solid vars.$border;
    background: vars.$surface;
    color: vars.$text-primary;
    font-weight: 600;
    @include mixins.interactive(background, box-shadow, border-color, color);
    box-shadow: 0 4px 12px rgba(15, 23, 42, 0.08);

    &:hover {
      background: color.scale(vars.$primary, $lightness: 84%);
      border-color: vars.$primary;
      color: vars.$primary;
    }

    &:active {
      transform: translateY(1px);
      box-shadow: 0 2px 6px rgba(15, 23, 42, 0.12);
    }
  }

  .remove {
    background-color: #fff;
    color: color.scale(vars.$secondary);
    border-color: color.scale(vars.$secondary, $lightness: -5%);

    &:hover {
      background: vars.$secondary;
      color: #fff;
      border-color: color.scale(vars.$secondary, $lightness: -5%);
    }
  }

  span {
    min-width: 2rem;
    text-align: center;
    font-weight: 700;
    color: vars.$primary;
  }
}

.footer {
  border-top: 1px solid vars.$border;
  padding-top: 1rem;
  display: grid;
  gap: 0.85rem;

  .total {
    font-weight: 700;
    font-size: 1rem;
    color: vars.$text-primary;
    margin-bottom: 6rem;
  }

  .actions {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
  }

  button {
    @include mixins.button-reset;
    padding: 0.65rem 1.25rem;
    border-radius: vars.$radius-sm;
    font-weight: 600;
    box-shadow: vars.$shadow-soft;
    @include mixins.interactive(background, color, box-shadow, transform);
  }
}

.checkout {
  background: vars.$primary;
  color: #fff;

  &:hover {
    color: #fff;
    background: color.scale(vars.$primary, $lightness: -8%);
  }
}

.clear {
  background: vars.$border;
  color: vars.$text-primary;

  &:hover {
    background: color.scale(vars.$border, $lightness: -6%);
  }
}
